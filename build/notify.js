"use strict";

/* Notify v0.2.0 */

var Notify = function Notify(selector, options) {
  var _this = this;
  if (options === undefined) options = {};
  this.el = this.getEl(selector);
  this.order = options.order || "default";
  this.closingDelay = parseInt(options.closingDelay) || 0;
  this.removingDelay = parseInt(options.removingDelay) || 3000;

  this.itemsCounter = 0;
  this.notifyList = {};

  this.orderConfig = {
    "default": "beforeEnd",
    reverse: "afterBegin"
  };

  this.notifyTypes = {
    error: "notify__error",
    warning: "notify__warning",
    success: "notify__success",
    "default": "notify__default"
  };

  this.el.addEventListener("click", function (e) {
    var classes = e.target.classList;
    if (classes.contains("notify__close")) {
      _this.close("#" + e.target.parentNode.id);
    }
  }, false);

  this.el.addEventListener("mouseover", function (e) {
    Object.keys(_this.notifyList).forEach(function (e) {
      clearTimeout(_this.notifyList[e].timeout);
    });
  }, true);

  this.el.addEventListener("mouseout", function (e) {
    Object.keys(_this.notifyList).forEach(function (item) {
      _this.notifyList[item].timeout = _this.setClosingDelay(item);
    });
  }, true);
};

Notify.prototype.getEl = function (arg) {
  if (typeof arg == "string") {
    return document.querySelector(arg);
  } else {
    return arg;
  }
};

Notify.prototype.setClosingDelay = function (item, closingDelay) {
  var _this2 = this;
  if (closingDelay === undefined) closingDelay = this.closingDelay;
  if (this.closingDelay) {
    var timeout = setTimeout(function () {
      _this2.close(item);
    }, this.closingDelay);

    return timeout;
  }
};

Notify.prototype.add = function (text, options) {
  if (options === undefined) options = {};
  var that = this;
  var timeout;
  var i = ++this.itemsCounter;
  var link = this.el.querySelector("#notify_" + i);
  var itemClasses = "notify__item";

  if (options.type) {
    itemClasses += " " + this.notifyTypes[options.type];
  } else {
    itemClasses += " " + this.notifyTypes["default"];
  }

  this.el.insertAdjacentHTML(this.orderConfig[this.order], "<div class=\"" + itemClasses + "\" id=\"notify_" + i + "\">\n          <div class=\"notify__close\">Ã—</div>\n          <div class=\"notify__content\">" + text + "</div>\n      </div>");
  timeout = this.setClosingDelay("#notify_" + i, options.closingDelay || this.closingDelay);
  that.notifyList["#notify_" + i] = { timeout: timeout, link: link };

  return this;
};

Notify.prototype.close = function (sel) {
  var _this3 = this;
  var el = this.getEl(sel);

  el.classList.add("notify--closing");

  setTimeout(function () {
    if (_this3.notifyList[sel]) {
      _this3.el.removeChild(el);

      if (_this3.notifyList[sel].timeout) {
        clearTimeout(_this3.notifyList[sel].timeout);
      }

      delete _this3.notifyList[sel];

      if (Object.keys(_this3.notifyList).length == 0) {
        _this3.itemsCounter = 0;
      }
    }
  }, this.removingDelay);

  return this;
};

Notify.prototype.closeAll = function () {
  var self = this;
  var items = this.el.querySelectorAll(".notify__item");

  Array.prototype.forEach.call(items, function (item) {
    self.close("#" + item.id);
  });
};

Notify.prototype.closeFirst = function () {
  var item = this.el.querySelector(":first-child");

  if (item) {
    this.close("#" + item.id);
  }
};

Notify.prototype.closeLast = function () {
  var item = this.el.querySelector(".notify__item:last-child");

  this.close("#" + item.id);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBRU0sTUFBTSxHQUNDLFNBRFAsTUFBTSxDQUNFLFFBQVEsRUFBRSxPQUFPLEVBQU87O01BQWQsT0FBTyxnQkFBUCxPQUFPLEdBQUcsRUFBRTtBQUNoQyxNQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsTUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxJQUFJLFNBQVMsQ0FBQztBQUN4QyxNQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3hELE1BQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUM7O0FBRTdELE1BQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLE1BQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDOztBQUVyQixNQUFJLENBQUMsV0FBVyxHQUFHO0FBQ2pCLGVBQVMsV0FBVztBQUNwQixXQUFPLEVBQUUsWUFBWTtHQUN0QixDQUFDOztBQUVGLE1BQUksQ0FBQyxXQUFXLEdBQUc7QUFDakIsU0FBSyxFQUFFLGVBQWU7QUFDdEIsV0FBTyxFQUFFLGlCQUFpQjtBQUMxQixXQUFPLEVBQUUsaUJBQWlCO0FBQzFCLGVBQVMsaUJBQWlCO0dBQzNCLENBQUM7O0FBRUYsTUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDdkMsUUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDakMsUUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3JDLFlBQUssS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUMxQztHQUNGLEVBQUUsS0FBSyxDQUFDLENBQUM7O0FBRVYsTUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDM0MsVUFBTSxDQUFDLElBQUksQ0FBQyxNQUFLLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFDLENBQUMsRUFBSztBQUMxQyxrQkFBWSxDQUFDLE1BQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQzFDLENBQUMsQ0FBQztHQUNKLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRVQsTUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDMUMsVUFBTSxDQUFDLElBQUksQ0FBQyxNQUFLLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFDLElBQUksRUFBSztBQUM3QyxZQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEdBQUcsTUFBSyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDNUQsQ0FBQyxDQUFDO0dBQ0osRUFBRSxJQUFJLENBQUMsQ0FBQztDQUNWOztBQXhDRyxNQUFNLFdBMkNWLEtBQUssR0FBQSxVQUFDLEdBQUcsRUFBRTtBQUNULE1BQUksT0FBTyxHQUFHLElBQUksUUFBUSxFQUFFO0FBQzFCLFdBQU8sUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUNwQyxNQUFNO0FBQ0wsV0FBTyxHQUFHLENBQUM7R0FDWjtDQUNGOztBQWpERyxNQUFNLFdBbURWLGVBQWUsR0FBQSxVQUFDLElBQUksRUFBRSxZQUFZLEVBQXNCOztNQUFsQyxZQUFZLGdCQUFaLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWTtBQUNwRCxNQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDckIsUUFBSSxPQUFPLEdBQUcsVUFBVSxDQUFDLFlBQU07QUFDN0IsYUFBSyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDbEIsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXRCLFdBQU8sT0FBTyxDQUFDO0dBQ2hCO0NBQ0Y7O0FBM0RHLE1BQU0sV0E4RFYsR0FBRyxHQUFBLFVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBTztNQUFkLE9BQU8sZ0JBQVAsT0FBTyxHQUFHLEVBQUU7QUFDcEIsTUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2hCLE1BQUksT0FBTyxDQUFDO0FBQ1osTUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQzVCLE1BQUksSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxjQUFZLENBQUMsQ0FBRyxDQUFDO0FBQ2pELE1BQUksV0FBVyxHQUFHLGNBQWMsQ0FBQzs7QUFFakMsTUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ2hCLGVBQVcsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDckQsTUFBTTtBQUNMLGVBQVcsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztHQUNsRDs7QUFFRCxNQUFJLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFDdEMsV0FBVyx1QkFBZ0IsQ0FBQyxzR0FFUixJQUFJLDBCQUMvQixDQUFDO0FBQ1gsU0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLGlCQUFpQixPQUFPLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUMxRixNQUFJLENBQUMsVUFBVSxnQkFBZ0IsR0FBRyxFQUFDLE9BQU8sRUFBUCxPQUFPLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBQyxDQUFDOztBQUVsRCxTQUFPLElBQUksQ0FBQztDQUNiOztBQXBGRyxNQUFNLFdBdUZWLEtBQUssR0FBQSxVQUFDLEdBQUcsRUFBRTs7QUFDVCxNQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUV6QixJQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztBQUVwQyxZQUFVLENBQUMsWUFBTTtBQUNmLFFBQUk7QUFDRjs7QUFFQSxVQUFJO0FBQ0Ysb0JBQVksQ0FBQztPQUNkOztBQUVELGFBQU87O0FBRVAsVUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2Q7T0FDRDtLQUNGO0dBQ0YsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXZCLFNBQU8sSUFBSSxDQUFDO0NBQ2I7O0FBN0dHLE1BQU0sV0FnSFYsUUFBUSxHQUFBLFlBQUc7QUFDVCxNQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsTUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFdEQsT0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFDLElBQUksRUFBSztBQUM1QyxRQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7R0FDM0IsQ0FBQyxDQUFDO0NBQ0o7O0FBdkhHLE1BQU0sV0EwSFYsVUFBVSxHQUFBLFlBQUc7QUFDWCxNQUFJLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFakQsTUFBSSxJQUFJLEVBQUU7QUFDUixRQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7R0FDM0I7Q0FDRjs7QUFoSUcsTUFBTSxXQWtJVixTQUFTLEdBQUEsWUFBRztBQUNWLE1BQUksSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUM7O0FBRTdELE1BQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUMzQiIsImZpbGUiOiJub3RpZnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBOb3RpZnkgdjAuMi4wICovXHJcblxyXG5jbGFzcyBOb3RpZnkge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBvcHRpb25zID0ge30pIHtcclxuICAgIHRoaXMuZWwgPSB0aGlzLmdldEVsKHNlbGVjdG9yKTtcclxuICAgIHRoaXMub3JkZXIgPSBvcHRpb25zLm9yZGVyIHx8ICdkZWZhdWx0JztcclxuICAgIHRoaXMuY2xvc2luZ0RlbGF5ID0gcGFyc2VJbnQob3B0aW9ucy5jbG9zaW5nRGVsYXkpIHx8IDA7XHJcbiAgICB0aGlzLnJlbW92aW5nRGVsYXkgPSBwYXJzZUludChvcHRpb25zLnJlbW92aW5nRGVsYXkpIHx8IDMwMDA7XHJcblxyXG4gICAgdGhpcy5pdGVtc0NvdW50ZXIgPSAwO1xyXG4gICAgdGhpcy5ub3RpZnlMaXN0ID0ge307XHJcblxyXG4gICAgdGhpcy5vcmRlckNvbmZpZyA9IHtcclxuICAgICAgZGVmYXVsdDogJ2JlZm9yZUVuZCcsXHJcbiAgICAgIHJldmVyc2U6ICdhZnRlckJlZ2luJ1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5vdGlmeVR5cGVzID0ge1xyXG4gICAgICBlcnJvcjogJ25vdGlmeV9fZXJyb3InLFxyXG4gICAgICB3YXJuaW5nOiAnbm90aWZ5X193YXJuaW5nJyxcclxuICAgICAgc3VjY2VzczogJ25vdGlmeV9fc3VjY2VzcycsXHJcbiAgICAgIGRlZmF1bHQ6ICdub3RpZnlfX2RlZmF1bHQnXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICB2YXIgY2xhc3NlcyA9IGUudGFyZ2V0LmNsYXNzTGlzdDtcclxuICAgICAgaWYgKGNsYXNzZXMuY29udGFpbnMoJ25vdGlmeV9fY2xvc2UnKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoJyMnICsgZS50YXJnZXQucGFyZW50Tm9kZS5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChlKSA9PiB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMubm90aWZ5TGlzdCkuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm5vdGlmeUxpc3RbZV0udGltZW91dCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIChlKSA9PiB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMubm90aWZ5TGlzdCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5TGlzdFtpdGVtXS50aW1lb3V0ID0gdGhpcy5zZXRDbG9zaW5nRGVsYXkoaXRlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0RWwoYXJnKSB7XHJcbiAgICBpZiAodHlwZW9mIGFyZyA9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhcmcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGFyZztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldENsb3NpbmdEZWxheShpdGVtLCBjbG9zaW5nRGVsYXkgPSB0aGlzLmNsb3NpbmdEZWxheSkge1xyXG4gICAgaWYgKHRoaXMuY2xvc2luZ0RlbGF5KSB7XHJcbiAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZShpdGVtKTtcclxuICAgICAgfSwgdGhpcy5jbG9zaW5nRGVsYXkpO1xyXG5cclxuICAgICAgcmV0dXJuIHRpbWVvdXQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgYWRkKHRleHQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgdmFyIHRpbWVvdXQ7XHJcbiAgICB2YXIgaSA9ICsrdGhpcy5pdGVtc0NvdW50ZXI7XHJcbiAgICB2YXIgbGluayA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihgI25vdGlmeV8ke2l9YCk7XHJcbiAgICB2YXIgaXRlbUNsYXNzZXMgPSAnbm90aWZ5X19pdGVtJztcclxuXHJcbiAgICBpZiAob3B0aW9ucy50eXBlKSB7XHJcbiAgICAgIGl0ZW1DbGFzc2VzICs9IFwiIFwiICsgdGhpcy5ub3RpZnlUeXBlc1tvcHRpb25zLnR5cGVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaXRlbUNsYXNzZXMgKz0gXCIgXCIgKyB0aGlzLm5vdGlmeVR5cGVzWydkZWZhdWx0J107XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lbC5pbnNlcnRBZGphY2VudEhUTUwodGhpcy5vcmRlckNvbmZpZ1t0aGlzLm9yZGVyXSxcclxuICAgICAgYDxkaXYgY2xhc3M9XCIke2l0ZW1DbGFzc2VzfVwiIGlkPVwibm90aWZ5XyR7aX1cIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZnlfX2Nsb3NlXCI+w5c8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZnlfX2NvbnRlbnRcIj4ke3RleHR9PC9kaXY+XHJcbiAgICAgIDwvZGl2PmApO1xyXG4gICAgdGltZW91dCA9IHRoaXMuc2V0Q2xvc2luZ0RlbGF5KGAjbm90aWZ5XyR7aX1gLCBvcHRpb25zLmNsb3NpbmdEZWxheSB8fCB0aGlzLmNsb3NpbmdEZWxheSk7XHJcbiAgICB0aGF0Lm5vdGlmeUxpc3RbYCNub3RpZnlfJHtpfWBdID0ge3RpbWVvdXQsIGxpbmt9O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlKHNlbCkge1xyXG4gICAgdmFyIGVsID0gdGhpcy5nZXRFbChzZWwpO1xyXG5cclxuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ25vdGlmeS0tY2xvc2luZycpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5ub3RpZnlMaXN0W3NlbF0pIHtcclxuICAgICAgICB0aGlzLmVsLnJlbW92ZUNoaWxkKGVsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5TGlzdFtzZWxdLnRpbWVvdXQpIHsgXHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ub3RpZnlMaXN0W3NlbF0udGltZW91dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZWxldGUgdGhpcy5ub3RpZnlMaXN0W3NlbF07XHJcblxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vdGlmeUxpc3QpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLml0ZW1zQ291bnRlciA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzLnJlbW92aW5nRGVsYXkpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlQWxsKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGl0ZW1zID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcubm90aWZ5X19pdGVtJyk7XHJcblxyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtcywgKGl0ZW0pID0+IHtcclxuICAgICAgc2VsZi5jbG9zZSgnIycgKyBpdGVtLmlkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlRmlyc3QoKSB7XHJcbiAgICB2YXIgaXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignOmZpcnN0LWNoaWxkJyk7XHJcblxyXG4gICAgaWYgKGl0ZW0pIHtcclxuICAgICAgdGhpcy5jbG9zZSgnIycgKyBpdGVtLmlkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlTGFzdCgpIHtcclxuICAgIHZhciBpdGVtID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubm90aWZ5X19pdGVtOmxhc3QtY2hpbGQnKTtcclxuXHJcbiAgICB0aGlzLmNsb3NlKCcjJyArIGl0ZW0uaWQpO1xyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==