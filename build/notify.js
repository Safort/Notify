"use strict";

/* Notify v0.2.0 */

var Notify = function Notify(selector, options) {
  var _this = this;
  if (options === undefined) options = {};
  this.el = this.getEl(selector);
  this.order = options.order || "default";
  this.closingDelay = parseInt(options.closingDelay) || 0;
  this.removingDelay = parseInt(options.removingDelay) || 3000;

  this.itemsCounter = 0;
  this.notifyList = {};

  this.orderConfig = {
    "default": "beforeEnd",
    reverse: "afterBegin"
  };

  this.notifyTypes = {
    error: "notify__error",
    warning: "notify__warning",
    success: "notify__success",
    "default": "notify__default"
  };

  this.el.addEventListener("click", function (e) {
    var classes = e.target.classList;

    if (classes.contains("notify__close")) {
      _this.close("#" + e.target.parentNode.id);
    }
  }, false);

  this.el.addEventListener("mouseover", function (e) {
    Object.keys(_this.notifyList).forEach(function (e) {
      clearTimeout(_this.notifyList[e].timeout);
    });
  }, true);

  this.el.addEventListener("mouseout", function (e) {
    Object.keys(_this.notifyList).forEach(function (item) {
      _this.notifyList[item].timeout = _this.setClosingDelay(item);
    });
  }, true);
};

Notify.prototype.getEl = function (arg) {
  if (typeof arg == "string") {
    return document.querySelector(arg);
  } else {
    return arg;
  }
};

Notify.prototype.setClosingDelay = function (item, closingDelay) {
  var _this2 = this;
  if (closingDelay === undefined) closingDelay = this.closingDelay;
  if (this.closingDelay) {
    var timeout = setTimeout(function () {
      _this2.close(item);
    }, this.closingDelay);

    return timeout;
  }
};

Notify.prototype.add = function (text, options) {
  if (options === undefined) options = {};
  var timeout = undefined;
  var i = ++this.itemsCounter;
  var link = this.el.querySelector("#notify_" + i);
  var itemClasses = "notify__item";

  if (options.type) {
    itemClasses += " " + this.notifyTypes[options.type];
  } else {
    itemClasses += " " + this.notifyTypes["default"];
  }

  this.el.insertAdjacentHTML(this.orderConfig[this.order], "<div class=\"" + itemClasses + "\" id=\"notify_" + i + "\">\n          <div class=\"notify__close\">Ã—</div>\n          <div class=\"notify__content\">" + text + "</div>\n      </div>");
  timeout = this.setClosingDelay("#notify_" + i, options.closingDelay || this.closingDelay);
  this.notifyList["#notify_" + i] = { timeout: timeout, link: link };

  return this;
};

Notify.prototype.close = function (sel) {
  var _this3 = this;
  var el = this.getEl(sel);

  el.classList.add("notify--closing");

  setTimeout(function () {
    if (_this3.notifyList[sel]) {
      _this3.el.removeChild(el);

      if (_this3.notifyList[sel].timeout) {
        clearTimeout(_this3.notifyList[sel].timeout);
      }

      delete _this3.notifyList[sel];

      if (Object.keys(_this3.notifyList).length == 0) {
        _this3.itemsCounter = 0;
      }
    }
  }, this.removingDelay);

  return this;
};

Notify.prototype.closeAll = function () {
  var self = this;
  var items = this.el.querySelectorAll(".notify__item");

  Array.prototype.forEach.call(items, function (item) {
    self.close("#" + item.id);
  });
};

Notify.prototype.closeFirst = function () {
  var item = this.el.querySelector(":first-child");

  if (item) {
    this.close("#" + item.id);
  }
};

Notify.prototype.closeLast = function () {
  var item = this.el.querySelector(".notify__item:last-child");

  if (item) {
    this.close("#" + item.id);
  }
};
//# sourceMappingURL=data:application/json;base64,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QUMsRUFBRSxDQUFDLENBQUM7R0FDM0I7Q0FDRiIsImZpbGUiOiJub3RpZnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBOb3RpZnkgdjAuMi4wICovXHJcblxyXG5jbGFzcyBOb3RpZnkge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBvcHRpb25zID0ge30pIHtcclxuICAgIHRoaXMuZWwgPSB0aGlzLmdldEVsKHNlbGVjdG9yKTtcclxuICAgIHRoaXMub3JkZXIgPSBvcHRpb25zLm9yZGVyIHx8ICdkZWZhdWx0JztcclxuICAgIHRoaXMuY2xvc2luZ0RlbGF5ID0gcGFyc2VJbnQob3B0aW9ucy5jbG9zaW5nRGVsYXkpIHx8IDA7XHJcbiAgICB0aGlzLnJlbW92aW5nRGVsYXkgPSBwYXJzZUludChvcHRpb25zLnJlbW92aW5nRGVsYXkpIHx8IDMwMDA7XHJcblxyXG4gICAgdGhpcy5pdGVtc0NvdW50ZXIgPSAwO1xyXG4gICAgdGhpcy5ub3RpZnlMaXN0ID0ge307XHJcblxyXG4gICAgdGhpcy5vcmRlckNvbmZpZyA9IHtcclxuICAgICAgZGVmYXVsdDogJ2JlZm9yZUVuZCcsXHJcbiAgICAgIHJldmVyc2U6ICdhZnRlckJlZ2luJ1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5vdGlmeVR5cGVzID0ge1xyXG4gICAgICBlcnJvcjogJ25vdGlmeV9fZXJyb3InLFxyXG4gICAgICB3YXJuaW5nOiAnbm90aWZ5X193YXJuaW5nJyxcclxuICAgICAgc3VjY2VzczogJ25vdGlmeV9fc3VjY2VzcycsXHJcbiAgICAgIGRlZmF1bHQ6ICdub3RpZnlfX2RlZmF1bHQnXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBsZXQgY2xhc3NlcyA9IGUudGFyZ2V0LmNsYXNzTGlzdDtcclxuXHJcbiAgICAgIGlmIChjbGFzc2VzLmNvbnRhaW5zKCdub3RpZnlfX2Nsb3NlJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCcjJyArIGUudGFyZ2V0LnBhcmVudE5vZGUuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZSkgPT4ge1xyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLm5vdGlmeUxpc3QpLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ub3RpZnlMaXN0W2VdLnRpbWVvdXQpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIHRydWUpO1xyXG5cclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoZSkgPT4ge1xyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLm5vdGlmeUxpc3QpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeUxpc3RbaXRlbV0udGltZW91dCA9IHRoaXMuc2V0Q2xvc2luZ0RlbGF5KGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldEVsKGFyZykge1xyXG4gICAgaWYgKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXJnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBhcmc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRDbG9zaW5nRGVsYXkoaXRlbSwgY2xvc2luZ0RlbGF5ID0gdGhpcy5jbG9zaW5nRGVsYXkpIHtcclxuICAgIGlmICh0aGlzLmNsb3NpbmdEZWxheSkge1xyXG4gICAgICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoaXRlbSk7XHJcbiAgICAgIH0sIHRoaXMuY2xvc2luZ0RlbGF5KTtcclxuXHJcbiAgICAgIHJldHVybiB0aW1lb3V0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGFkZCh0ZXh0LCBvcHRpb25zID0ge30pIHtcclxuICAgIGxldCB0aW1lb3V0O1xyXG4gICAgbGV0IGkgPSArK3RoaXMuaXRlbXNDb3VudGVyO1xyXG4gICAgbGV0IGxpbmsgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYCNub3RpZnlfJHtpfWApO1xyXG4gICAgbGV0IGl0ZW1DbGFzc2VzID0gJ25vdGlmeV9faXRlbSc7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMudHlwZSkge1xyXG4gICAgICBpdGVtQ2xhc3NlcyArPSBcIiBcIiArIHRoaXMubm90aWZ5VHlwZXNbb3B0aW9ucy50eXBlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGl0ZW1DbGFzc2VzICs9IFwiIFwiICsgdGhpcy5ub3RpZnlUeXBlc1snZGVmYXVsdCddO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKHRoaXMub3JkZXJDb25maWdbdGhpcy5vcmRlcl0sXHJcbiAgICAgIGA8ZGl2IGNsYXNzPVwiJHtpdGVtQ2xhc3Nlc31cIiBpZD1cIm5vdGlmeV8ke2l9XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZ5X19jbG9zZVwiPsOXPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZ5X19jb250ZW50XCI+JHt0ZXh0fTwvZGl2PlxyXG4gICAgICA8L2Rpdj5gKTtcclxuICAgIHRpbWVvdXQgPSB0aGlzLnNldENsb3NpbmdEZWxheShgI25vdGlmeV8ke2l9YCwgb3B0aW9ucy5jbG9zaW5nRGVsYXkgfHwgdGhpcy5jbG9zaW5nRGVsYXkpO1xyXG4gICAgdGhpcy5ub3RpZnlMaXN0W2Ajbm90aWZ5XyR7aX1gXSA9IHt0aW1lb3V0LCBsaW5rfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG5cclxuICBjbG9zZShzZWwpIHtcclxuICAgIGxldCBlbCA9IHRoaXMuZ2V0RWwoc2VsKTtcclxuXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdub3RpZnktLWNsb3NpbmcnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMubm90aWZ5TGlzdFtzZWxdKSB7XHJcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChlbCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5vdGlmeUxpc3Rbc2VsXS50aW1lb3V0KSB7IFxyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm90aWZ5TGlzdFtzZWxdLnRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVsZXRlIHRoaXMubm90aWZ5TGlzdFtzZWxdO1xyXG5cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5ub3RpZnlMaXN0KS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5pdGVtc0NvdW50ZXIgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5yZW1vdmluZ0RlbGF5KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG5cclxuICBjbG9zZUFsbCgpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgIGxldCBpdGVtcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLm5vdGlmeV9faXRlbScpO1xyXG5cclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaXRlbXMsIChpdGVtKSA9PiB7XHJcbiAgICAgIHNlbGYuY2xvc2UoJyMnICsgaXRlbS5pZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBjbG9zZUZpcnN0KCkge1xyXG4gICAgbGV0IGl0ZW0gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJzpmaXJzdC1jaGlsZCcpO1xyXG5cclxuICAgIGlmIChpdGVtKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoJyMnICsgaXRlbS5pZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZUxhc3QoKSB7XHJcbiAgICBsZXQgaXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLm5vdGlmeV9faXRlbTpsYXN0LWNoaWxkJyk7XHJcblxyXG4gICAgaWYgKGl0ZW0pIHtcclxuICAgICAgdGhpcy5jbG9zZSgnIycgKyBpdGVtLmlkKTtcclxuICAgIH1cclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=